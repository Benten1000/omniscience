;================== EXTENSIONS CONFIG ==================

[from-telegram]
; Context for outgoing calls triggered by Telegram bot
exten => _X.,1,NoOp(Outgoing call from Telegram bot to VoIP.ms)
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})    ; save input globally
 same => n,NoOp(Dialing ${LASTINPUT} via voipms-endpoint)
 same => n,Dial(PJSIP/${LASTINPUT}@voipms-aor,30)
 same => n,Hangup()

[default]
; Local testing or internal calls
exten => 1000,1,Answer()
 same => n,Playback(welcome)
 same => n,Read(userinput,beep,5,,#)
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})
 same => n,Playback(thank-you)
 same => n,Hangup()

[from-voipms]
; Context for incoming calls from VoIP.ms
exten => _X.,1,NoOp(Incoming call from VoIP.ms)
 same => n,Answer()
 same => n,Playback(hello)       ; optional greeting
 same => n,Read(userinput,beep,5,,#)
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})
 same => n,Playback(thank-you)
 same => n,Hangup()
