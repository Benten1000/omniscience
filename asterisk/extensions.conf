;================== EXTENSIONS CONFIG ==================

[from-telegram]
; This context handles outgoing calls triggered by Telegram
exten => _X.,1,NoOp(Outgoing call to VoIP.ms via Telegram)
 same => n,Answer()                                ; pick up the call
 same => n,Playback(welcome)                       ; optional audio prompt
 same => n,Read(userinput,beep,15,,#)             ; collect up to 15 digits, end with #
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})    ; store the input globally
 same => n,Playback(thank-you)                     ; optional audio confirmation
 same => n,Dial(PJSIP/voipms-endpoint/+${userinput},30) ; call via your PJSIP endpoint
 same => n,Hangup()

[default]
; This context can be used for local testing or other internal calls
exten => 1000,1,Answer()
 same => n,Playback(welcome)                       ; replace with your own audio file
 same => n,Read(userinput,beep,5,,#)             ; collect up to 5 digits
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})
 same => n,Playback(thank-you)
 same => n,Hangup()

[from-voipms]
; This context handles incoming calls from VoIP.ms
exten => _X.,1,NoOp(Incoming call from VoIP.ms)
 same => n,Playback(hello)                         ; optional greeting
 same => n,Read(userinput,beep,5,,#)             ; collect digits from the caller
 same => n,Set(GLOBAL(LASTINPUT)=${userinput})
 same => n,Playback(thank-you)
 same => n,Hangup()
